import{K as A,r as x,j as e,S as r,L as T}from"./app-DsTwdazc.js";import{A as q,b as L,a as R}from"./alert-Cj8fJi1u.js";import{B as _}from"./badge-fJqk-oMP.js";import{a as D,B as a}from"./createLucideIcon-upp3zg0H.js";import{C as i,a as l,b as n,d as t,c}from"./card-CNOKyrAc.js";import{D as p}from"./data-table-B0n7BHpt.js";import{T as M,a as H,b as y,c as g}from"./tabs-CjR5Vvkh.js";import{A as I}from"./app-layout-CTWXThtW.js";import{S}from"./layout-C8YLXwGq.js";import{P as Y}from"./play-CiOZE2Wl.js";import{T as v}from"./trash-2-BF5PEsbn.js";import{C as E}from"./circle-check-B7GOgsTJ.js";/* empty css            */import"./table-s_Uch2FN.js";import"./input-DcfLo4nu.js";import"./index-Df0WfHtO.js";import"./scroll-area-B0tUH6FX.js";import"./index-BdQq_4o_.js";import"./calendar-D_lVF0Dv.js";import"./extends-CF3RwP-h.js";import"./loader-circle-BSU-Px5q.js";import"./check-P2Lck8a1.js";import"./chevron-up-Lr5Czpow.js";import"./chevron-down-qsDv8VlT.js";import"./index-Dj8NjCvl.js";import"./heading-CQjpW-8m.js";import"./separator-PeuN9Yhk.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],u=D("RefreshCw",P),Z=[{title:"Kuyruk İzleme",href:"/settings/queue-monitor"}];function ye({jobsDataTableMeta:h,failedJobsDataTableMeta:d,queueStats:o}){const{flash:j}=A().props,[f,N]=x.useState("pending"),k=x.useMemo(()=>[{accessorKey:"id",header:"ID"},{accessorKey:"job_name",header:"İş Adı"},{accessorKey:"queue",header:"Kuyruk"},{accessorKey:"attempts",header:"Deneme"},{accessorKey:"reserved",header:"Rezerve"},{accessorKey:"available_at",header:"Uygun Zaman"},{accessorKey:"created_at",header:"Oluşturulma"},{id:"actions",cell:({row:s})=>{const m=s.original;return e.jsx("div",{className:"flex gap-2",children:e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>w(m.id),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Çalıştır"]})})},header:"İşlemler"}],[]),b=x.useMemo(()=>[{accessorKey:"id",header:"ID"},{accessorKey:"job_name",header:"İş Adı"},{accessorKey:"queue",header:"Kuyruk"},{accessorKey:"failed_at",header:"Başarısız Zamanı"},{id:"actions",cell:({row:s})=>{const m=s.original;return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>C(m.id),children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Yeniden Dene"]}),e.jsxs(a,{variant:"destructive",size:"sm",onClick:()=>z(m.id),children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Sil"]})]})},header:"İşlemler"}],[]),C=s=>{r.post(route("queue-monitor.retry"),{id:s})},K=()=>{r.post(route("queue-monitor.retry-all"))},z=s=>{r.post(route("queue-monitor.delete"),{id:s})},B=()=>{r.post(route("queue-monitor.clear-all"))},w=s=>{r.post(route("queue-monitor.run-job"),{id:s})};return e.jsx(I,{breadcrumbs:Z,children:e.jsxs(S,{children:[e.jsx(T,{title:"Kuyruk İzleme"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"Kuyruk İzleme"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>r.reload(),children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Yenile"]})})]}),j.success&&e.jsxs(q,{className:"border-green-200 bg-green-50",children:[e.jsx(E,{className:"h-4 w-4 text-green-600"}),e.jsx(L,{className:"text-green-600",children:"Başarılı"}),e.jsx(R,{className:"text-green-600",children:j.success})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"pb-2",children:[e.jsx(n,{children:"Bekleyen İşler"}),e.jsx(t,{children:"Kuyruktaki işlem sayısı"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-3xl font-bold",children:o.pending})})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"pb-2",children:[e.jsx(n,{children:"Başarısız İşler"}),e.jsx(t,{children:"Başarısız işlem sayısı"})]}),e.jsx(c,{children:e.jsx("div",{className:"text-3xl font-bold",children:o.failed})})]}),e.jsxs(i,{children:[e.jsxs(l,{className:"pb-2",children:[e.jsx(n,{children:"Mail Durumu"}),e.jsx(t,{children:"Mail gönderim durumu"})]}),e.jsx(c,{children:e.jsx("div",{className:"flex items-center",children:e.jsx(_,{variant:o.pending>0?"outline":"secondary",children:o.pending>0?"İşleniyor":"Hazır"})})})]})]}),e.jsxs(M,{value:f,onValueChange:N,children:[e.jsxs(H,{className:"grid w-full grid-cols-2",children:[e.jsx(y,{value:"pending",children:"Bekleyen İşler"}),e.jsx(y,{value:"failed",children:"Başarısız İşler"})]}),e.jsx(g,{value:"pending",className:"mt-4",children:e.jsxs(i,{children:[e.jsxs(l,{children:[e.jsx(n,{children:"Bekleyen İşler"}),e.jsx(t,{children:"Kuyruktaki işlemlerin listesi"})]}),e.jsx(c,{children:h.data.data.length===0?e.jsx("div",{className:"py-6 text-center text-zinc-500",children:"Kuyruğa eklenmiş bekleyen iş bulunmuyor."}):e.jsx(p,{columns:k,data:h.data.data,meta:h.meta,routeName:"queue-monitor.index",searchKey:"id"})})]})}),e.jsx(g,{value:"failed",className:"mt-4",children:e.jsxs(i,{children:[e.jsxs(l,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Başarısız İşler"}),e.jsx(t,{children:"Başarısız olan işlemlerin listesi"})]}),e.jsx("div",{className:"flex gap-2",children:d.data.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{variant:"outline",size:"sm",onClick:K,children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Tümünü Yeniden Dene"]}),e.jsxs(a,{variant:"destructive",size:"sm",onClick:B,children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Tümünü Temizle"]})]})})]}),e.jsx(c,{children:d.data.data.length===0?e.jsx("div",{className:"py-6 text-center text-zinc-500",children:"Başarısız iş bulunmuyor."}):e.jsx(p,{columns:b,data:d.data.data,meta:d.meta,routeName:"queue-monitor.index",searchKey:"id"})})]})})]})]})]})})}export{ye as default};
