import{K as k,r as p,m as S,j as e,L as T,$ as n,S as z}from"./app-DsTwdazc.js";import{H as P}from"./heading-CQjpW-8m.js";import{B as l}from"./badge-fJqk-oMP.js";import{a as A,B as r}from"./createLucideIcon-upp3zg0H.js";import{C as B,a as I,b as L,c as M}from"./card-CNOKyrAc.js";import{D as w}from"./confirm-dialog-BqVrO6P-.js";import{D as E}from"./data-table-B0n7BHpt.js";import{f as H}from"./index-Df0WfHtO.js";import{D as O,a as R,b as $,c as G,d as V,e as W}from"./dialog-y7PrwYn5.js";import{S as Y,a as F,b as q,c as J,d as Q}from"./select-UaO1UCEY.js";import{A as U}from"./app-layout-CTWXThtW.js";import{P as i,a as t}from"./modulePermissions-Ct0XfNpZ.js";import{P as X}from"./plus-C2QQyLDf.js";import{E as Z}from"./eye-uo9kZ-Cj.js";import{W as ee}from"./wallet-cards-ClAg8Yts.js";import{P as se}from"./pencil-DIqLFFmD.js";import{T as ae}from"./trash-2-BF5PEsbn.js";import{t as re}from"./scroll-area-B0tUH6FX.js";/* empty css            */import"./alert-dialog-CQDtV-TV.js";import"./table-s_Uch2FN.js";import"./input-DcfLo4nu.js";import"./calendar-D_lVF0Dv.js";import"./extends-CF3RwP-h.js";import"./loader-circle-BSU-Px5q.js";import"./check-P2Lck8a1.js";import"./chevron-up-Lr5Czpow.js";import"./chevron-down-qsDv8VlT.js";import"./index-BdQq_4o_.js";import"./index-Dj8NjCvl.js";import"./index-C5an8EuA.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],te=A("ArrowRightLeft",ie),ne=[{title:"Ana Sayfa",href:route("dashboard")},{title:"Kasalar",href:route("cash-boxes.index")}];function He({cashBoxes:j,dataTableMeta:f,branch:o,branchId:le,availableBranches:b}){const{auth:{user:{activeBranch:a}}}=k().props,[g,c]=p.useState(!1),[d,m]=p.useState(null),y=s=>{z.delete(route("cash-boxes.destroy",s),{onSuccess:()=>{}})},{data:h,setData:N,post:v,processing:D,errors:x,reset:u}=S({branch_id:""}),K=s=>{m(s),c(!0),u()},_=()=>{d&&v(route("cash-boxes.transfer",d),{onSuccess:()=>{c(!1),u(),m(null)}})},C=[{accessorKey:"name",header:"Kasa Adı",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"size-3 rounded-full",style:{backgroundColor:s.original.color}}),e.jsx("span",{children:s.original.name})]})},{accessorKey:"type",header:"Kasa Tipi",cell:({row:s})=>e.jsx(l,{variant:"outline",children:s.original.type==="cash"?"Nakit Kasa":"Banka Hesabı"})},{accessorKey:"currency",header:"Para Birimi",cell:({row:s})=>e.jsxs(l,{variant:"outline",children:[s.original.currency," ",s.original.formatted_currency]})},{accessorKey:"iban",header:"IBAN",cell:({row:s})=>s.original.iban?e.jsx("span",{children:s.original.iban}):e.jsx("span",{className:"text-muted-foreground",children:"-"})},{accessorKey:"is_active",header:"Durum",cell:({row:s})=>s.original.is_active?e.jsx(l,{className:"bg-green-500",children:"Aktif"}):e.jsx(l,{variant:"outline",className:"text-muted-foreground",children:"Pasif"})},{accessorKey:"created_at",header:"Oluşturulma Tarihi",cell:({row:s})=>e.jsx("span",{children:H(new Date(s.original.created_at),"dd MMM yyyy",{locale:re})})},{id:"actions",header:"İşlemler",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{permissions:[t.cash_boxes.view],children:e.jsx(n,{href:route("cash-boxes.show",s.original.id),children:e.jsx(r,{size:"sm",variant:"outline",children:e.jsx(Z,{className:"h-4 w-4"})})})}),e.jsx(i,{permissions:[t.cash_boxes.view],children:e.jsx(n,{href:route("cash-boxes.eod-sessions",s.original.id),children:e.jsx(r,{size:"sm",variant:"outline",tooltip:"Gün Sonu Raporları",children:e.jsx(ee,{className:"h-4 w-4"})})})}),e.jsx(i,{permissions:[t.cash_boxes.edit],children:e.jsx(n,{href:route("cash-boxes.edit",s.original.id),children:e.jsx(r,{size:"sm",variant:"outline",children:e.jsx(se,{className:"h-4 w-4"})})})}),e.jsx(i,{permissions:[t.cash_boxes.edit],children:e.jsx(r,{size:"sm",variant:"outline",onClick:()=>K(s.original.id),children:e.jsx(te,{className:"h-4 w-4"})})}),e.jsx(i,{permissions:[t.cash_boxes.delete],children:e.jsx(w,{title:"Kasayı Sil",description:"Bu kasayı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.",onConfirm:()=>y(s.original.id),children:e.jsx(r,{size:"sm",variant:"outline",children:e.jsx(ae,{className:"text-destructive h-4 w-4"})})})})]})}];return e.jsxs(U,{breadcrumbs:ne,children:[e.jsx(T,{title:"Kasalar"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(P,{title:`${(a==null?void 0:a.name)||(o==null?void 0:o.name)||"Aktif Şube"} Şubesi Kasaları`,description:"Şubeye ait tüm kasaları görüntüleyebilirsiniz.",buttons:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(i,{permissions:[t.cash_boxes.create],children:e.jsx(n,{href:route("cash-boxes.create"),children:e.jsxs(r,{children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Yeni Kasa"]})})})})}),e.jsx(i,{permissions:[t.cash_boxes.view],children:e.jsxs(B,{children:[e.jsx(I,{children:e.jsx(L,{children:"Kasalar Listesi"})}),e.jsx(M,{children:e.jsx(E,{columns:C,data:j.data,meta:f,routeName:"cash-boxes.index",searchKey:"name",searchPlaceholder:"Kasa adı ara...",reloadProps:["cashBoxes","dataTableMeta"]})})]})})]}),e.jsx(O,{open:g,onOpenChange:c,children:e.jsxs(R,{children:[e.jsxs($,{children:[e.jsx(G,{children:"Kasa Transfer Et"}),e.jsx(V,{children:"Kasayı başka bir şubeye transfer etmek için aşağıdan şube seçin."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Mevcut Şube"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:(a==null?void 0:a.name)||"Bilinmeyen Şube"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Yeni Şube"}),e.jsxs(Y,{value:h.branch_id,onValueChange:s=>N("branch_id",s),children:[e.jsx(F,{children:e.jsx(q,{placeholder:"Şube seçin"})}),e.jsx(J,{children:b.filter(s=>s.id!==((a==null?void 0:a.id)||0)).map(s=>e.jsx(Q,{value:s.id.toString(),children:s.name},s.id))})]}),x.branch_id&&e.jsx("p",{className:"text-sm text-red-500",children:x.branch_id})]})]}),e.jsx(W,{children:e.jsx(r,{type:"button",onClick:_,disabled:D||!h.branch_id,children:"Transfer Et"})})]})})]})}export{He as default};
